---
layout: docs
title: Adding a new endpoint to an application in Microclimate
description: A guide on how to add a new endpoint to a Node.js application in microclimate
keywords: example, tutorial, endpoints, JSON, Node.js, GET request, code, POST requests, Postman application, Todo list, error, add endpoint, parse JSON data, code examples, using Curl, using Postman application
duration: 10 minutes
permalink: addendpoint
type: document
---

# Adding a new endpoint to an application in Microclimate

In this tutorial, you learn how to add a new endpoint to an application in Microclimate that can accept and parse JSON data.

You start by creating a Todo List application to make use of the endpoint you create. Then, use a new Node.js project generated by Microclimate. For more information, see [Using Microclimate](usingmicroclimate).

The code examples shown in this tutorial are for a Node.js application, but you can also add endpoints to your Java or Swift applications on Microclimate.

## Adding a basic endpoint to your application

Create a basic endpoint for the application that can handle a GET request and return a string of text. Use `/list` as your endpoint.

Add a new file called `list.js` in **server** > **routers**, and add the following code to create the endpoint:

```javascript
var express = require('express');

module.exports = function(app) {
  var router = express.Router();

  router.get('/', function (req, res) {
    res.send('Your Todo List');
  });

  app.use("/list", router);
}
```

This code creates a new endpoint on `/list` that returns the string `‘Your Todo List’` when you make a GET request.

You also need to add the new endpoint to the `index.js` file to ensure that it is accessible. Just add a new line inside the `module.exports` block:

```javascript
require('./list')(app);
```

![Image of index.js added code](dist/images/tutorial-add-endpoint-1.png)


You're now ready to test the application. You can test within Microclimate directly because it builds and runs the application automatically by default when the project is updated.

Click `Open App` to open the application and show the default page when an application is generated in Microclimate. To view the endpoint you just added, add `/list` onto the end of the Application URL so that it looks something like `http://localhost:<your application port>/list`.

You now see the response from the application:

![Image of response from application](dist/images/tutorial-add-endpoint-2.png)

## Handling POST requests and JSON data

You now have a working endpoint. Use POST to allow it to handle JSON data sent to it.

You need to include the Express JSON parser to your `list.js` file that you created earlier so that you can parse JSON sent to the endpoint.

Add the code to handle the POST request. For now, we expect a JSON object with a single property, ``name``, for the name of the task. Add the following code to the `list.js` file:

```javascript
router.post('/', function (req, res) {
  if(req.body.name) {
    res.send(`${req.body.name} is added to your list!\n`);
  } else {
    res.status(400);
    res.send('Expecting a JSON object with a "name" property.\n');
  }
});
```
Then, add `app.use(express.json());` next to the other `app.use...` line.

This code takes the POST request, parses the JSON object, and looks for a name property. If it finds a name property, it returns `“<name> is added to your list!”`. Otherwise, it returns an error message and a status of `400`, which indicates a bad request.

Your final `list.js` file should look like this:

![Image of list.js final code](dist/images/tutorial-add-endpoint-3.png)

That’s all the code needed to create a new endpoint in Microclimate that can handle a JSON POST request. All you need to do now is test that it actually works!

## Send a POST request with JSON to your application

You can test your new application in one of two ways:

1.  Use curl on the command line.
2.  Use the Postman application.

You can use whichever one you feel most comfortable with.

### Using Curl

If you haven’t installed curl already, follow the installation instructions available on their site.

To send a JSON object to your application, open your terminal and enter the following code to send a JSON object with a new task called *“Create great software in Microclimate”*:

```bash
curl -X POST -H "Content-Type: application/json" -d '{"name":"Create great software in Microclimate"}' http://localhost:<your application port>/list
```

Make sure you add your application port instead of the placeholder text. You can find it on the **Open app** page of Microclimate.

If it worked correctly, you should see a response in your terminal:

```
Create great software in Microclimate is added to your list!
```
You can also test what happens if you don’t include the name property:

```bash
curl -X POST -H "Content-Type: application/json" -d '{}' http://localhost:<your application port>/list
```

You get the error response:

```
Expecting a JSON object with a "name" property.
```


### Using the Postman application
If you don’t already have Postman installed, you can download it [here](https://www.getpostman.com/apps).

![Image of Postman application](dist/images/tutorial-add-endpoint-4.png)

When you’ve opened it, paste the URL from the Microclimate Open app page, making sure it includes the `/list` endpoint, which should look something like this: `http://localhost:<your application port>/list`. Then, change the request type to POST by using the drop down list from the URL.

Next, include the payload you want to send. Select the `body` tab and click the `raw` radio button. Change the type to JSON (application/json) and add the following JSON to the text box:

```JSON
{
	"name":"Create great software in Microclimate"
}
```

Finally, click **Send**, and you see the application response:

![Image of application response](dist/images/tutorial-add-endpoint-5.png)

You can test the error message by sending an empty JSON object. Simply delete the ``name`` entry.

## Next steps

You can now add new endpoints to your application. If you’re feeling adventurous, you can continue developing the Todo list yourself. Otherwise, check out some of our other guides at [Using Microclimate](usingmicroclimate).
